[{"title":"hexo 新增mermaid支持","date":"2023-02-07T04:42:00.000Z","path":"2023/Deploy/hexo新增mermaid支持/","text":"趁着博客整合，修理一下mermaid不支持的问题。 从网上找到了一些教程，但是配置过程中也发现了一些问题，所以在这里记录一下。 一、安装安装插件： 1npm install hexo-filter-mermaid-diagrams 添加配置。在主题目录下的_config.yml文件中新增配置： 123456# mermaid chartmermaid: ## mermaid url https://github.com/knsv/mermaid enable: true # default true version: &quot;7.1.2&quot; # default v7.1.2 options: # find more api options from https://github.com/knsv/mermaid/blob/master/src/mermaidAPI.js #startOnload: true // default true 添加支持。我使用的BuleLake主题js后缀是.ejs（其它类型（.pug、.swig）参考Github说明），在themes\\bluelake\\layout\\_partial\\**after-footer.ejs**中添加如下内容 12345678&lt;% if (theme.mermaid.enable) &#123; %&gt; &lt;script src=&#x27;https://unpkg.com/mermaid@&lt;%= theme.mermaid.version %&gt;/dist/mermaid.min.js&#x27;&gt;&lt;/script&gt; &lt;script&gt; if (window.mermaid) &#123; mermaid.initialize(&#123;theme: &#x27;forest&#x27;&#125;); &#125; &lt;/script&gt;&lt;% &#125; %&gt; 二、使用主题类型：（在上面修改文件时配置）： default - This is the default theme for all diagrams. neutral - This theme is great for black and white documents that will be printed. dark - This theme goes well with dark-colored elements or dark-mode. forest - This theme contains shades of green. base - This is the only theme that can be modified. Use this theme as the base for customizations. 三、注意 mermaid新增配置是修改的主题目录下的文件 需要将根目录配置_config.yml中highlight下的auto_detect设置为true","tags":[{"name":"部署","slug":"部署","permalink":"https://www.delta1037.cn/tags/%E9%83%A8%E7%BD%B2/"}]},{"title":"博客更新说明","date":"2023-02-07T03:12:00.000Z","path":"2023/Deploy/博客更新说明/","text":"博客最近整合到了notion统一管理，并更新了hexo和主题版本，正在逐个完善并重新上传之前的博客内容","tags":[{"name":"部署","slug":"部署","permalink":"https://www.delta1037.cn/tags/%E9%83%A8%E7%BD%B2/"}]},{"title":"Latex fontspec Error","date":"2023-02-06T04:00:00.000Z","path":"2023/Bugsfix/LatexfontspecError/","text":"latex编译时，出现报错! Package fontspec Error: The font &quot;Microsoft YaHei&quot; cannot be found. 排查问题记录与问题的思考。 一、环境 window11 texlive 2022 一份带有中文的tex文件 12# 中文环境配置\\usepackage[UTF8]&#123;ctex&#125; 二、问题在执行xelatex *.tex时，出现如下报错： 12345678910111213141516171819202122Package biblatex Warning: &#x27;babel/polyglossia&#x27; detected but &#x27;csquotes&#x27; missing.(biblatex) Loading &#x27;csquotes&#x27; recommended.(e:/texlive/2022/texmf-dist/tex/latex/newpx/TeXGyrePagellaX.fontspec)(./main.aux)*geometry* driver: auto-detecting*geometry* detected driver: xetex(e:/texlive/2022/texmf-dist/tex/latex/biblatex/lbx/english.lbx)No file main.bbl.Package hyperref Warning: Rerun to get /PageLabels entry.! Package fontspec Error: The font &quot;Microsoft YaHei&quot; cannot be found.For immediate help type H &lt;return&gt;. ...l.79 ...sep=1cm]&#123;\\Huge\\centering\\bfseries\\sffamily \\parbox[c][][t]&#123;\\paperwidt...? 已知该字体已安装（解决过程中也重装该字体很多次） 三、解决看到! Package fontspec Error: The font &quot;Microsoft YaHei&quot; cannot be found时，判断为字体没有识别，于是尝试重装该字体，重新加载字体缓存等操作，均无效（搞了一下午的字体问题，还把window10上的字体拷贝过来重新安装了）。 恰好手边有另一份带有中文的tex源文件（并不知道其中是如何配置的中文环境，只是有试一试的想法），于是尝试编译，结果成功了。 那么报字体问题的错误，问题根源是否出在字体问题上呢？再回顾模板的下载和修改过程，发现有一段数学符号包是后来添加的： 123456\\usepackage&#123;esint&#125;\\newcommand&#123;\\gt&#125;&#123;\\textgreater&#125;\\newcommand&#123;\\lt&#125;&#123;\\textless&#125;\\usepackage&#123;euler&#125;\\usepackage&#123;newpxtext&#125;\\usepackage&#123;amsmath&#125; 使用排除法（将上面所有的包全注释掉，一个一个添加），发现是newpxtext的问题，去掉该包之后，执行xelatex *.tex时，没有再出现报错。 四、思考虽然终端显示的是字体问题，但是当字体确实没有问题的时候，就要考虑别的方向，做一些并行测试来对比分析（例如上面在另外一份类似的tex工程中尝试编译）。 另外要仔细分析日志，再看日志最后一部分时，可以看到有以下疑点： 123456789101112131415161718192021222324252627(e:/texlive/2022/texmf-dist/tex/latex/realscripts/realscripts.sty))Package biblatex Warning: &#x27;babel/polyglossia&#x27; detected but &#x27;csquotes&#x27; missing.(biblatex) Loading &#x27;csquotes&#x27; recommended.# 1、这里出现的最后的包是newpx，就是newpxtext(e:/texlive/2022/texmf-dist/tex/latex/&lt;font color=&quot;#D44C47&quot;&gt;**newpx**&lt;/font&gt;/TeXGyrePagellaX.fontspec)# 2、这里来看，有几个包含中文的文件都已经通过了，所以有可能不是字体问题&lt;font color=&quot;#D44C47&quot;&gt;(./main.aux (./sub_chapter/01-basic_block.aux)(./sub_chapter/02-advance_block.aux) (./sub_chapter/03-database.aux)(./sub_chapter/04-multi_media.aux) (./sub_chapter/05-insert_block.aux)(./sub_chapter/06-rich_text.aux) (./sub_chapter/07-database_op.aux)(./sub_chapter/08-database_formula.aux))&lt;/font&gt;*geometry* driver: auto-detecting*geometry* detected driver: xetex(e:/texlive/2022/texmf-dist/tex/latex/biblatex/lbx/english.lbx)No file main.bbl.! Package fontspec Error: The font &quot;Microsoft YaHei&quot; cannot be found.For immediate help type H &lt;return&gt;. ...l.79 ...sep=1cm]&#123;\\Huge\\centering\\bfseries\\sffamily \\parbox[c][][t]&#123;\\paperwidt...? 完整的输出日志： 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277PS F:\\GitHubRepo\\LatexBook\\Notion_handout_latex&gt; xelatex mainThis is XeTeX, Version 3.141592653-2.6-0.999994 (TeX Live 2022) (preloaded format=xelatex) restricted \\write18 enabled.entering extended mode(./main.texLaTeX2e &lt;2022-11-01&gt; patch level 1L3 programming layer &lt;2023-02-02&gt;(e:/texlive/2022/texmf-dist/tex/latex/base/book.clsDocument Class: book 2022/07/02 v1.4n Standard LaTeX document class(e:/texlive/2022/texmf-dist/tex/latex/base/fleqn.clo)(e:/texlive/2022/texmf-dist/tex/latex/base/bk11.clo)) (./structure.tex(e:/texlive/2022/texmf-dist/tex/latex/graphics/graphicx.sty(e:/texlive/2022/texmf-dist/tex/latex/graphics/keyval.sty)(e:/texlive/2022/texmf-dist/tex/latex/graphics/graphics.sty(e:/texlive/2022/texmf-dist/tex/latex/graphics/trig.sty)(e:/texlive/2022/texmf-dist/tex/latex/graphics-cfg/graphics.cfg)(e:/texlive/2022/texmf-dist/tex/latex/graphics-def/xetex.def)))(e:/texlive/2022/texmf-dist/tex/latex/lipsum/lipsum.sty(e:/texlive/2022/texmf-dist/tex/latex/l3packages/l3keys2e/l3keys2e.sty(e:/texlive/2022/texmf-dist/tex/latex/l3kernel/expl3.sty(e:/texlive/2022/texmf-dist/tex/latex/l3backend/l3backend-xetex.def)))(e:/texlive/2022/texmf-dist/tex/latex/lipsum/lipsum.ltd.tex))(e:/texlive/2022/texmf-dist/tex/latex/pgf/frontendlayer/tikz.sty(e:/texlive/2022/texmf-dist/tex/latex/pgf/basiclayer/pgf.sty(e:/texlive/2022/texmf-dist/tex/latex/pgf/utilities/pgfrcs.sty(e:/texlive/2022/texmf-dist/tex/generic/pgf/utilities/pgfutil-common.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/utilities/pgfutil-latex.def)(e:/texlive/2022/texmf-dist/tex/generic/pgf/utilities/pgfrcs.code.tex(e:/texlive/2022/texmf-dist/tex/generic/pgf/pgf.revision.tex)))(e:/texlive/2022/texmf-dist/tex/latex/pgf/basiclayer/pgfcore.sty(e:/texlive/2022/texmf-dist/tex/latex/pgf/systemlayer/pgfsys.sty(e:/texlive/2022/texmf-dist/tex/generic/pgf/systemlayer/pgfsys.code.tex(e:/texlive/2022/texmf-dist/tex/generic/pgf/utilities/pgfkeys.code.tex(e:/texlive/2022/texmf-dist/tex/generic/pgf/utilities/pgfkeyslibraryfiltered.code.tex)) (e:/texlive/2022/texmf-dist/tex/generic/pgf/systemlayer/pgf.cfg)(e:/texlive/2022/texmf-dist/tex/generic/pgf/systemlayer/pgfsys-xetex.def(e:/texlive/2022/texmf-dist/tex/generic/pgf/systemlayer/pgfsys-dvipdfmx.def(e:/texlive/2022/texmf-dist/tex/generic/pgf/systemlayer/pgfsys-common-pdf.def))))(e:/texlive/2022/texmf-dist/tex/generic/pgf/systemlayer/pgfsyssoftpath.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/systemlayer/pgfsysprotocol.code.tex)) (e:/texlive/2022/texmf-dist/tex/latex/xcolor/xcolor.sty(e:/texlive/2022/texmf-dist/tex/latex/graphics-cfg/color.cfg)(e:/texlive/2022/texmf-dist/tex/latex/graphics/mathcolor.ltx))(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcore.code.tex(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmath.code.tex(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathutil.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathparser.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.basic.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.trigonometric.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.random.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.comparison.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.base.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.round.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.misc.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfunctions.integerarithmetics.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathcalc.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmathfloat.code.tex))(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfint.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorepoints.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorepathconstruct.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorepathusage.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorescopes.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcoregraphicstate.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcoretransformations.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorequick.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcoreobjects.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorepathprocessing.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorearrows.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcoreshade.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcoreimage.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcoreexternal.code.tex) (e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorelayers.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcoretransparency.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorepatterns.code.tex) (e:/texlive/2022/texmf-dist/tex/generic/pgf/basiclayer/pgfcorerdf.code.tex))) (e:/texlive/2022/texmf-dist/tex/generic/pgf/modules/pgfmoduleshapes.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/modules/pgfmoduleplot.code.tex)(e:/texlive/2022/texmf-dist/tex/latex/pgf/compatibility/pgfcomp-version-0-65.sty)(e:/texlive/2022/texmf-dist/tex/latex/pgf/compatibility/pgfcomp-version-1-18.sty)) (e:/texlive/2022/texmf-dist/tex/latex/pgf/utilities/pgffor.sty(e:/texlive/2022/texmf-dist/tex/latex/pgf/utilities/pgfkeys.sty(e:/texlive/2022/texmf-dist/tex/generic/pgf/utilities/pgfkeys.code.tex))(e:/texlive/2022/texmf-dist/tex/latex/pgf/math/pgfmath.sty(e:/texlive/2022/texmf-dist/tex/generic/pgf/math/pgfmath.code.tex))(e:/texlive/2022/texmf-dist/tex/generic/pgf/utilities/pgffor.code.tex))(e:/texlive/2022/texmf-dist/tex/generic/pgf/frontendlayer/tikz/tikz.code.tex(e:/texlive/2022/texmf-dist/tex/generic/pgf/libraries/pgflibraryplothandlers.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/modules/pgfmodulematrix.code.tex)(e:/texlive/2022/texmf-dist/tex/generic/pgf/frontendlayer/tikz/libraries/tikzlibrarytopaths.code.tex)))(e:/texlive/2022/texmf-dist/tex/generic/babel/babel.sty(e:/texlive/2022/texmf-dist/tex/generic/babel/xebabel.def)(e:/texlive/2022/texmf-dist/tex/generic/babel-english/english.ldf))(e:/texlive/2022/texmf-dist/tex/generic/babel/locale/en/babel-english.tex)(e:/texlive/2022/texmf-dist/tex/latex/enumitem/enumitem.sty)(e:/texlive/2022/texmf-dist/tex/latex/booktabs/booktabs.sty)(e:/texlive/2022/texmf-dist/tex/latex/geometry/geometry.sty(e:/texlive/2022/texmf-dist/tex/generic/iftex/ifvtex.sty(e:/texlive/2022/texmf-dist/tex/generic/iftex/iftex.sty)))(e:/texlive/2022/texmf-dist/tex/latex/psnfss/avant.sty)(e:/texlive/2022/texmf-dist/tex/latex/psnfss/mathptmx.sty)(e:/texlive/2022/texmf-dist/tex/latex/microtype/microtype.sty(e:/texlive/2022/texmf-dist/tex/latex/etoolbox/etoolbox.sty)(e:/texlive/2022/texmf-dist/tex/latex/microtype/microtype-xetex.def)(e:/texlive/2022/texmf-dist/tex/latex/microtype/microtype.cfg))(e:/texlive/2022/texmf-dist/tex/latex/base/inputenc.styPackage inputenc Warning: inputenc package ignored with utf8 based engines.) (e:/texlive/2022/texmf-dist/tex/latex/base/fontenc.sty(e:/texlive/2022/texmf-dist/tex/latex/psnfss/t1ptm.fd))(e:/texlive/2022/texmf-dist/tex/latex/biblatex/biblatex.sty(e:/texlive/2022/texmf-dist/tex/generic/pdftexcmds/pdftexcmds.sty(e:/texlive/2022/texmf-dist/tex/generic/infwarerr/infwarerr.sty)(e:/texlive/2022/texmf-dist/tex/generic/ltxcmds/ltxcmds.sty))(e:/texlive/2022/texmf-dist/tex/latex/kvoptions/kvoptions.sty(e:/texlive/2022/texmf-dist/tex/latex/kvsetkeys/kvsetkeys.sty))(e:/texlive/2022/texmf-dist/tex/latex/logreq/logreq.sty(e:/texlive/2022/texmf-dist/tex/latex/logreq/logreq.def))(e:/texlive/2022/texmf-dist/tex/latex/base/ifthen.sty)(e:/texlive/2022/texmf-dist/tex/latex/url/url.sty)(e:/texlive/2022/texmf-dist/tex/latex/biblatex/blx-dm.def)(e:/texlive/2022/texmf-dist/tex/latex/biblatex/blx-unicode.def)(e:/texlive/2022/texmf-dist/tex/latex/biblatex/blx-compat.def)(e:/texlive/2022/texmf-dist/tex/latex/biblatex/biblatex.def)(e:/texlive/2022/texmf-dist/tex/latex/biblatex/bbx/numeric.bbx(e:/texlive/2022/texmf-dist/tex/latex/biblatex/bbx/standard.bbx))(e:/texlive/2022/texmf-dist/tex/latex/biblatex/cbx/numeric.cbx)(e:/texlive/2022/texmf-dist/tex/latex/biblatex/biblatex.cfg)Package biblatex Warning: &#x27;babel&#x27; option is deprecated.(biblatex) Please use &#x27;autolang&#x27; instead.(e:/texlive/2022/texmf-dist/tex/latex/biblatex/blx-case-expl3.sty(e:/texlive/2022/texmf-dist/tex/latex/l3packages/xparse/xparse.sty)))(e:/texlive/2022/texmf-dist/tex/latex/tools/calc.sty)(e:/texlive/2022/texmf-dist/tex/latex/base/makeidx.sty)Writing index file main.idx(e:/texlive/2022/texmf-dist/tex/latex/titlesec/titletoc.sty)(e:/texlive/2022/texmf-dist/tex/latex/fancyhdr/fancyhdr.sty)(e:/texlive/2022/texmf-dist/tex/latex/amsmath/amsmath.styFor additional information on amsmath, use the `?&#x27; option.(e:/texlive/2022/texmf-dist/tex/latex/amsmath/amstext.sty(e:/texlive/2022/texmf-dist/tex/latex/amsmath/amsgen.sty))(e:/texlive/2022/texmf-dist/tex/latex/amsmath/amsbsy.sty)(e:/texlive/2022/texmf-dist/tex/latex/amsmath/amsopn.sty))(e:/texlive/2022/texmf-dist/tex/latex/amsfonts/amsfonts.sty)(e:/texlive/2022/texmf-dist/tex/latex/amsfonts/amssymb.sty)(e:/texlive/2022/texmf-dist/tex/latex/amscls/amsthm.sty)(e:/texlive/2022/texmf-dist/tex/latex/mdframed/mdframed.sty(e:/texlive/2022/texmf-dist/tex/latex/zref/zref-abspage.sty(e:/texlive/2022/texmf-dist/tex/latex/zref/zref-base.sty(e:/texlive/2022/texmf-dist/tex/generic/kvdefinekeys/kvdefinekeys.sty)(e:/texlive/2022/texmf-dist/tex/generic/etexcmds/etexcmds.sty)(e:/texlive/2022/texmf-dist/tex/latex/auxhook/auxhook.sty))(e:/texlive/2022/texmf-dist/tex/latex/base/atbegshi-ltx.sty))(e:/texlive/2022/texmf-dist/tex/latex/needspace/needspace.sty)(e:/texlive/2022/texmf-dist/tex/latex/mdframed/md-frame-0.mdf))(e:/texlive/2022/texmf-dist/tex/latex/hyperref/hyperref.sty(e:/texlive/2022/texmf-dist/tex/generic/pdfescape/pdfescape.sty)(e:/texlive/2022/texmf-dist/tex/latex/hycolor/hycolor.sty)(e:/texlive/2022/texmf-dist/tex/latex/letltxmacro/letltxmacro.sty)(e:/texlive/2022/texmf-dist/tex/latex/hyperref/nameref.sty(e:/texlive/2022/texmf-dist/tex/latex/refcount/refcount.sty)(e:/texlive/2022/texmf-dist/tex/generic/gettitlestring/gettitlestring.sty))(e:/texlive/2022/texmf-dist/tex/latex/hyperref/pd1enc.def)(e:/texlive/2022/texmf-dist/tex/generic/intcalc/intcalc.sty)(e:/texlive/2022/texmf-dist/tex/latex/hyperref/puenc.def)(e:/texlive/2022/texmf-dist/tex/generic/bitset/bitset.sty(e:/texlive/2022/texmf-dist/tex/generic/bigintcalc/bigintcalc.sty)))(e:/texlive/2022/texmf-dist/tex/latex/hyperref/hxetex.def(e:/texlive/2022/texmf-dist/tex/generic/stringenc/stringenc.sty)(e:/texlive/2022/texmf-dist/tex/latex/rerunfilecheck/rerunfilecheck.sty(e:/texlive/2022/texmf-dist/tex/latex/base/atveryend-ltx.sty)(e:/texlive/2022/texmf-dist/tex/generic/uniquecounter/uniquecounter.sty)))Package hyperref Warning: Option `backref&#x27; has already been used,(hyperref) setting the option has no effect on input line 504.Package hyperref Warning: Option `pagebackref&#x27; has already been used,(hyperref) setting the option has no effect on input line 504.Package hyperref Warning: Option `hyperindex&#x27; has already been used,(hyperref) setting the option has no effect on input line 504.Package hyperref Warning: Option `bookmarks&#x27; has already been used,(hyperref) setting the option has no effect on input line 504.(e:/texlive/2022/texmf-dist/tex/latex/bookmark/bookmark.sty(e:/texlive/2022/texmf-dist/tex/latex/bookmark/bkm-dvipdfm.def)))(e:/texlive/2022/texmf-dist/tex/latex/ctex/ctex.sty(e:/texlive/2022/texmf-dist/tex/latex/ctex/ctexhook.sty)(e:/texlive/2022/texmf-dist/tex/latex/ctex/ctexpatch.sty)(e:/texlive/2022/texmf-dist/tex/latex/base/fix-cm.sty(e:/texlive/2022/texmf-dist/tex/latex/base/ts1enc.def))(e:/texlive/2022/texmf-dist/tex/latex/ctex/config/ctexopts.cfg)(e:/texlive/2022/texmf-dist/tex/latex/ctex/engine/ctex-engine-xetex.def(e:/texlive/2022/texmf-dist/tex/xelatex/xecjk/xeCJK.sty(e:/texlive/2022/texmf-dist/tex/latex/l3packages/xtemplate/xtemplate.sty)(e:/texlive/2022/texmf-dist/tex/latex/fontspec/fontspec.sty(e:/texlive/2022/texmf-dist/tex/latex/fontspec/fontspec-xetex.sty(e:/texlive/2022/texmf-dist/tex/latex/base/fontenc.sty)(e:/texlive/2022/texmf-dist/tex/latex/fontspec/fontspec.cfg)))(e:/texlive/2022/texmf-dist/tex/xelatex/xecjk/xeCJK.cfg)))(e:/texlive/2022/texmf-dist/tex/latex/zhnumber/zhnumber.sty(e:/texlive/2022/texmf-dist/tex/latex/zhnumber/zhnumber-utf8.cfg))(e:/texlive/2022/texmf-dist/tex/latex/ctex/scheme/ctex-scheme-chinese.def(e:/texlive/2022/texmf-dist/tex/latex/ctex/config/ctex-name-utf8.cfg))(e:/texlive/2022/texmf-dist/tex/latex/tools/indentfirst.sty)(e:/texlive/2022/texmf-dist/tex/latex/ctex/fontset/ctex-fontset-windows.def))(e:/texlive/2022/texmf-dist/tex/latex/ctex/config/ctex.cfg)(e:/texlive/2022/texmf-dist/tex/latex/esint/esint.sty)(e:/texlive/2022/texmf-dist/tex/latex/euler/euler.styPackage: `euler&#x27; v2.5 &lt;1995/03/05&gt; (FJ and FMi)) (e:/texlive/2022/texmf-dist/tex/latex/newpx/newpxtext.sty`newpxtext&#x27; v1.504, 2022/01/30 Text macros taking advantage of TeXGyre Pagellaand its extensions (msharpe)(e:/texlive/2022/texmf-dist/tex/latex/base/fontenc.sty(e:/texlive/2022/texmf-dist/tex/latex/lm/t1lmr.fd))(e:/texlive/2022/texmf-dist/tex/generic/iftex/ifxetex.sty)(e:/texlive/2022/texmf-dist/tex/generic/iftex/ifluatex.sty)(e:/texlive/2022/texmf-dist/tex/latex/xkeyval/xkeyval.sty(e:/texlive/2022/texmf-dist/tex/generic/xkeyval/xkeyval.tex(e:/texlive/2022/texmf-dist/tex/generic/xkeyval/xkvutils.tex)))(e:/texlive/2022/texmf-dist/tex/latex/base/textcomp.sty)(e:/texlive/2022/texmf-dist/tex/generic/xstring/xstring.sty(e:/texlive/2022/texmf-dist/tex/generic/xstring/xstring.tex))(e:/texlive/2022/texmf-dist/tex/latex/carlisle/scalefnt.sty)(e:/texlive/2022/texmf-dist/tex/latex/realscripts/realscripts.sty))Package biblatex Warning: &#x27;babel/polyglossia&#x27; detected but &#x27;csquotes&#x27; missing.(biblatex) Loading &#x27;csquotes&#x27; recommended.(e:/texlive/2022/texmf-dist/tex/latex/newpx/TeXGyrePagellaX.fontspec)(./main.aux (./sub_chapter/01-basic_block.aux)(./sub_chapter/02-advance_block.aux) (./sub_chapter/03-database.aux)(./sub_chapter/04-multi_media.aux) (./sub_chapter/05-insert_block.aux)(./sub_chapter/06-rich_text.aux) (./sub_chapter/07-database_op.aux)(./sub_chapter/08-database_formula.aux))*geometry* driver: auto-detecting*geometry* detected driver: xetex(e:/texlive/2022/texmf-dist/tex/latex/biblatex/lbx/english.lbx)No file main.bbl.! Package fontspec Error: The font &quot;Microsoft YaHei&quot; cannot be found.For immediate help type H &lt;return&gt;. ...l.79 ...sep=1cm]&#123;\\Huge\\centering\\bfseries\\sffamily \\parbox[c][][t]&#123;\\paperwidt...?","tags":[{"name":"Latex","slug":"Latex","permalink":"https://www.delta1037.cn/tags/Latex/"},{"name":"Bug","slug":"Bug","permalink":"https://www.delta1037.cn/tags/Bug/"}]},{"title":"应用程序设计","date":"2022-03-05T03:12:00.000Z","path":"2022/Project/应用程序设计/","text":"三年工作经验之成果，简要概述了应用程序的设计过程~以下没有参考任何文档，纯属瞎编！ 一、模块划分模块是为了让大型应用程序的结构更加清晰，在对程序进行重构或者修改模块的功能时更加方便。模块一般需要根据功能类型区分，一般功能包括以下几种： 日志记录：用于程序运行过程的打点记录，在程序运行出错时能够定位到出错位置和相关必要数据 DEBUG日志：调试时使用，包括详细的调试信息，程序出错时辅助调试 INFO日志：记录程序运行记录，打卡记录 ERROR日志：记录程序出错记录 数据记录：程序相关的大量数据条目记录，一般与数据库接壤 配置记录：程序配置相关，配置参数则使用文本文件记录（JSON格式、YAML格式等） 会话控制：网络连接模块，用于控制两个程序之间的通信 会话协议：两个程序的会话需要制定明确的会话协议 任务控制：多线程程序 任务启动、停止、回收控制 卡死线程处理 缓存控制：缓存文件数据或者网络数据（辅助快速加载） 1.1 日志记录对于一个日志记录模块，最主要的功能就是提供日志记录功能。其它功能如下： 日志的输出等级：可以选择日志输出的最低等级（低于此等级的日志不输出） 日志输出位置：可以输出到终端、保存到文件。 日志保存到文件时，对于不同模块的日志可以选择保存到到不同的文件；当文件过大时，将日志内容归档管理。 1.2 数据记录在对接到应用程序的上层部分，一般需要根据程序的具体需求定制（比如存储什么数据，许需要哪些数据操作接口（增删查改之类的））。在数据记录的底层部分，可以支持多种数据库类型，方便数据库的切换，或者使用不同的数据库完成不同的需求（瞎猜的，实际没有遇到过）。 该模块可以设计为细腰型结构，包括上层对接具体需求，中层管理，底层聚合多种数据库类型。这种结构一方面是便于新增新的功能或者支持新的数据库；另一方面是方便移植到另一个应用程序上（只需要替换上层部分即可）。细腰型结构示例： graph TD A(数据需求1) --> B(管理) C(数据需求2) --> B(管理) B(管理) --> D[Mysql] B(管理) --> E[SQLITE] 1.3 配置记录配置模块和日志模块一样，都是应用程序的基础。配置用来初始化一些应用程序的参数，如果把这些参数写入到程序内部，那么在需要调整参数的时候就会很麻烦（重新编译程序），所以需要与应用程序隔离的文件来存储一些在程序启动时可能会发生改变的内容。 配置模块需要对应用程序提供的基本功能是根据key来获取对应的值，即获取某个参数的值；配置模块也可以添加一些高级功能，例如向配置文件写入一个参数的值；当程序运行时，如果监测到配置发生改变时，对程序中对应的参数重新初始化。 配置的存储需要与应用程序的语言相适应。C&#x2F;C++一般使用一行即为一个参数配置（使用“：”或者“&#x3D;”隔离参数的key和value）；Python可以很方便的使用json库，所以可以使用JSON文件作为配置文件。 1.4 会话控制会话控制模块一般用于本地或者网络上的两个进程间的通信。通信则一般分为同步和异步方式，同步通信方式就是进程A向进程B索要数据，A等着B完成，然后拿到数据；异步方式是进程A向进程B索要数据，确定B收到索要数据之后A立即返回，B开始准备数据，当B数据准备好之后将数据发送给A，A拿到数据。 会话控制模块一般分为两层，上层是会话协议层，下层是网络传输层，会话协议层主要定义两个程序之间的通信协议（A：你今天吃什么？B：我吃番茄炒鸡蛋），网络传输部分主要是定义信息传输的方式（怎么把”你今天吃什么？“这句话发出去），一般有Socket（TCP&#x2F;UDP）、HTTP等。 graph TD subgraph 从 E(从:会话协议) C(从:网络传输) end subgraph 主 A(主:会话协议) B(主:网络传输) end 1.5 任务控制一般的多任务程序中都需要任务管理，多任务即为多线程任务，多线程任务包括临时任务、持久化任务等等。任务控制模块可以提供任务控制功能，基本的包括启动任务和终止任务，更复杂点的包括任务的活性监测（监测线程是否卡住）。 多任务模块需要考虑的点有： 基本功能： 启动任务：开启一个新的线程，此时需要数据传入和函数传入（不同的类型其处理函数也不一样，处理函数也需要不同的数据，需要考虑的是怎么把开启新线程的接口统一：封装统一的数据结构相对来说是一种扩展性很强的方案） 终止任务：当任务没有分离时，使用的计算机语言一般会提供回收的方式 活性监测：任务开启时注册一个定时器，当定时器结束时说明任务还没有退出（如果进程提前退出则说明该任务实例已经被销毁（注意销毁任务实例的定时器处理）） 1.6 缓存控制缓存控制的目的是存储一些临时性的数据，用来保存数据或者加速访问某些内容。一般应用是可以缓存其它模块的数据内容（比如会话控制的会话数据和任务控制的任务数据）或者需要加速访问的内容（从文件中读取的一些内容、从网络上获取到的内容，这些内容如果重新获取对于一个对运行时间有要求的程序来说时间成本过大。但是要注意，这些内容短期内不会发生变化，如果这些内容每次获取都不一样，那么或许重新获取是无法避免的） 缓存控制的设计比较灵活，一般需要根据实际的应用程序设计（具体问题具体分析）。对于一些常规性的存储内容（其它模块需要存储的数据）则可以统一实现，减少重复造轮子的可能性。 二、逻辑2.1 必要逻辑计算机语言都会（所有的）包含一些必要的逻辑，包括： 数据操作：保存数据、打印数据 顺序执行：逐条执行代码 循环处理：循环执行某段代码 条件处理：根据条件判断是否执行某段代码 函数封装：将某一个小功能封装成函数 2.2 类的概念继承和多态（待补充） 对于含有类概念的计算机语言（C++、Python）： 类的概念比函数封装更进一步。函数封装只会封装单个的功能；类则封装了数据和多个功能，即包含了数据和处理数据的方法。类的一个实例通常称为对象（类可以描述为实例的蓝图，设计图），对象的出现使得类区别于数据和方法的集合。每一个类的对象都有自己的数据空间，使得不同的对象互相隔离。 模块的出现使得同类型的操作得以聚合。例如一个SQLITE数据库操作类，其中数据区域可以包括数据库的位置信息；操作方法包括增删查改等常用方法的集合。 将操作方法聚合成类和聚合成文件（无类）的区别。将操作方法封装成类时，数据定义保存在类中，方法定义保存在类中，当我们操作不同位置的数据库时，可以实例化多个对象，这些对象的区别仅有其中的数据区域（数据库的位置）；将操作方法汇聚成文件时，当我们操作不同位置的数据库时，可以定义空间来存储不同的数据库位置，当调用某一个数据库方法时，需要传入一些必要的内容（例如数据库的位置或者数据库操作句柄）等。 使用类的优势：类将数据定义和方法定义封装到一起，第一是类的进一步封装使得代码边界更加清晰，数据定义易于管理；第二是减少了不必要的外部数据的传入（类初始化时传入并在数据区域统一管理）。 2.3 模块的概念对于含有模块概念的计算机语言： 模块的概念比类的概念更宽泛，类是一种类型（奔驰）的方法的封装，模块可以认为是一类对象（奔驰、奥迪）的封装，实际上模块的分类包括日志记录模块，数据记录模块（里面可能包含了Mysql数据库操作对象和SQLITE数据库操作对象等多种类封装）。 模块的优势：模块将同一属性的内容封装（放）到一起，第一是方便不同模块的管理，方便模块替换（只要对外的API是不改变的，那么模块很容易被替换或者修改内部功能），便于代码的维护（在修改某一部分的功能时，直接到对应的模块修改）； 三、细节计算机语言只是实现目的的一种工具，不同的语言在对模块的实现上有不同的优势，在选用语言来完成某一功能时，需要考虑如下内容： 功能复杂性： 是否需要拆分成不同模块，模块之间的耦合 运行的平台： 运行环境的配置 运行速度要求：编译语言和脚本语言 时间控制精度要求：我之前用Shell写一个程序时，程序的时间很难控制（定时运行） 底层模块依赖：是否有精力进行从砖头开始垒房子，或者快速从墙片开始垒房子（一样结实的） 语言 优势 弱势 平台 分类 C 1、快 1、数据管理2、打地基 1、编译运行 高级 C++ 1、快 1、打地基 1、编译运行 高级 Python 1、库多 1、较慢（边解释边运行） 1、打包运行2、解释器运行 脚本 Shell 1、无需编译 1、数据管理2、复杂处理 1、解释器运行（Linux） 脚本 四、语言组合不同的语言是可以互通的，这样可以解决某一个语言的缺陷。例如Python调用C实现的动态库（以解决Python运行慢的问题）（实例：Numpy底层使用C语言编写，内部解除了GIL（全局解释器锁），其对数组的操作速度不受Python解释器的限制，效率远高于纯Python代码）。 其它代码互相调用的例子不再赘述。 五、程序设计在需求定义完成之后，就可以开始着手程序的架构设计，架构是语言无关的，最终无论用什么语言去实现这个程序都可以，只是存在难易度和细节的调整问题。难易度和细节指的是一个语言是否具有良好的生态（有没有现成的稳健的依赖包，或者自己有没有积攒一些常用的代码段等），另外就是程序在与外部对接的过程，有没有封装良好的接口。 程序架构的设计是基于需求的目标的，是一个有目的的设计。为了完成最终的目标，我们需要让各个模块按照我们目标运作起来。动起来是最基本的，我们还需要考虑之后的维护过程，怎么让代码更好的去维护，另外还有考虑代码的复用性，这些代码能不能封装起来在之后的项目中使用。 软件工程中有一个名为“高内聚、低耦合”的概念，我们在写代码之前就需要考试考虑好这个问题，低耦合是为了让基本不相关的内容分离设计，高内聚是让一个模块恰好做一件事。在低耦合方面，如果日志模块和缓存模块纠缠在一起，再加一个数据库模块的话难道要再重写一个日志模块？再高内聚方面，一个日志模块不需要分散开写成多个部分，日志模块就是提供一个稳定的标准的日志接口，里面怎么实现是不需要调用者关注的。本人觉得做好“高内聚、低耦合”就能得到一份好维护，复用性强的代码。 做好程序架构的设计之后，就可以开始做语言的选型，从划分的各个模块入手开始做代码的编写。在做语言的选型问题的时候，要考虑与外部对接的难易度，例如与数据库的对接，与外部接口的对接等等，有的语言例如python对这些有很好的支持，但是C++就需要仔细考虑怎么对接的问题。","tags":[{"name":"程序设计","slug":"程序设计","permalink":"https://www.delta1037.cn/tags/%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1/"}]},{"title":"Apache配置ssl","date":"2018-07-31T04:00:00.000Z","path":"2018/Deploy/Apache配置ssl/","text":"阿里云申请的ssl证书配置(Apache) 一、下载证书 下载证书 上传到服务器 解压到 &#x2F;etc&#x2F;apache2&#x2F;ssl (不存在则创建) 二、配置Apache 打开SSL模块 $ a2enmod ssl 配置conf 编辑apache2配置文件 $ vim &#x2F;etc&#x2F;apache2&#x2F;apache2.conf apache2配置文件 text123456&lt;Directory /var/www/&gt; Options Indexes FollowSymLinks #把none改为all AllowOverride all Require all granted&lt;/Directory&gt; 编辑port.conf文件 text1$ vim ports.conf port.conf配置 text1234#添加监听443端口&lt;IfModule ssl_module&gt; Listen 443&lt;/IfModule&gt; 配置default-ssl.conf text123456789#添加servernameServerName example.com#修改sslengineSSLEngine on#添加证书文件，按照阿里云给出的示例添加即可#证书的文件位置就是刚刚上传的位置SSLCertificateFile /etc/apache2/ssl/public.pemSSLCertificateKeyFile /etc/apache2/ssl/2146003231320408.keySSLCertificateChainFile /etc/apache2/ssl/chain.pem 三、启用启用刚刚的ssl配置 text1$ a2ensite default-ssl 重启apache服务器 text1$ service apache2 restart OK~","tags":[{"name":"SSL","slug":"SSL","permalink":"https://www.delta1037.cn/tags/SSL/"}]}]